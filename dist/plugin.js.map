{"version":3,"file":"plugin.js","sources":["esm/index.js","esm/web.js"],"sourcesContent":["import { registerPlugin } from '@capacitor/core';\nconst ModernNotifications = registerPlugin('ModernNotifications', {\n    web: () => import('./web').then((m) => new m.ModernNotificationsWeb()),\n});\nexport * from './definitions';\nexport { ModernNotifications };\n//# sourceMappingURL=index.js.map","import { WebPlugin } from '@capacitor/core';\nexport class ModernNotificationsWeb extends WebPlugin {\n    constructor() {\n        super(...arguments);\n        this.notifications = [];\n        this.deliveredNotifications = [];\n        this.channels = [];\n        this.permission = 'prompt';\n    }\n    async requestPermissions() {\n        // Check if Notification API is supported\n        if (!('Notification' in window)) {\n            console.warn('This browser does not support desktop notifications');\n            this.permission = 'denied';\n            return { display: 'denied' };\n        }\n        // Request permission\n        const permission = await Notification.requestPermission();\n        this.permission = permission === 'granted' ? 'granted' : 'denied';\n        return { display: this.permission };\n    }\n    async checkPermissions() {\n        if (!('Notification' in window)) {\n            return { display: 'denied' };\n        }\n        this.permission = Notification.permission === 'granted' ? 'granted' :\n            Notification.permission === 'denied' ? 'denied' : 'prompt';\n        return { display: this.permission };\n    }\n    async schedule(options) {\n        var _a, _b;\n        const { notifications } = options;\n        if (this.permission !== 'granted') {\n            throw new Error('Permission not granted for notifications');\n        }\n        for (const notification of notifications) {\n            if ((_a = notification.schedule) === null || _a === void 0 ? void 0 : _a.at) {\n                // Schedule for specific time\n                const delay = notification.schedule.at.getTime() - Date.now();\n                if (delay > 0) {\n                    setTimeout(() => {\n                        this.showNotification(notification);\n                    }, delay);\n                }\n            }\n            else if ((_b = notification.schedule) === null || _b === void 0 ? void 0 : _b.after) {\n                // Schedule after delay\n                setTimeout(() => {\n                    this.showNotification(notification);\n                }, notification.schedule.after);\n            }\n            else {\n                // Show immediately\n                this.showNotification(notification);\n            }\n            this.notifications.push(notification);\n        }\n        return { notifications };\n    }\n    showNotification(notification) {\n        const options = {\n            body: notification.body,\n            icon: notification.largeIcon || notification.smallIcon,\n            badge: notification.badge,\n            tag: notification.id.toString(),\n            data: Object.assign(Object.assign({}, notification.extra), { id: notification.id, progressStyle: notification.progressStyle }),\n        };\n        const webNotification = new Notification(notification.title, options);\n        webNotification.onclick = () => {\n            // Notify action performed when clicked\n            this.notifyListeners('localNotificationActionPerformed', {\n                notification,\n                actionId: 'tap',\n            });\n            webNotification.close();\n        };\n        webNotification.onshow = () => {\n            // Notify when notification is received/shown\n            this.notifyListeners('localNotificationReceived', {\n                notification,\n            });\n        };\n        // Move to delivered\n        this.deliveredNotifications.push(notification);\n        // Remove from pending\n        const index = this.notifications.findIndex(n => n.id === notification.id);\n        if (index > -1) {\n            this.notifications.splice(index, 1);\n        }\n    }\n    async getPending() {\n        return { notifications: this.notifications };\n    }\n    async getDelivered() {\n        return { notifications: this.deliveredNotifications };\n    }\n    async cancel(options) {\n        const idsToCancel = options.notifications.map(n => n.id);\n        this.notifications = this.notifications.filter(n => !idsToCancel.includes(n.id));\n    }\n    async cancelAll() {\n        this.notifications = [];\n    }\n    async removeDelivered(options) {\n        const idsToRemove = options.notifications.map(n => n.id);\n        this.deliveredNotifications = this.deliveredNotifications.filter(n => !idsToRemove.includes(n.id));\n    }\n    async removeAllDelivered() {\n        this.deliveredNotifications = [];\n    }\n    async createChannel(channel) {\n        // Web doesn't support channels, but we'll store for consistency\n        this.channels.push(channel);\n        console.log('Channel created (web implementation):', channel);\n    }\n    async deleteChannel(options) {\n        this.channels = this.channels.filter(c => c.id !== options.id);\n        console.log('Channel deleted (web implementation):', options.id);\n    }\n    async listChannels() {\n        return { channels: this.channels };\n    }\n    async updateProgress(options) {\n        // Find notification and update progress\n        const notification = this.deliveredNotifications.find(n => n.id === options.id);\n        if (notification && notification.progressStyle) {\n            notification.progressStyle.progress = options.progress;\n            if (options.progressStyle) {\n                notification.progressStyle = Object.assign(Object.assign({}, notification.progressStyle), options.progressStyle);\n            }\n            console.log('Progress updated (web implementation):', options);\n        }\n    }\n    async addProgressPoints(options) {\n        const notification = this.deliveredNotifications.find(n => n.id === options.id);\n        if (notification && notification.progressStyle) {\n            if (!notification.progressStyle.points) {\n                notification.progressStyle.points = [];\n            }\n            notification.progressStyle.points.push(...options.points);\n            console.log('Progress points added (web implementation):', options);\n        }\n    }\n    async updateProgressSegments(options) {\n        const notification = this.deliveredNotifications.find(n => n.id === options.id);\n        if (notification && notification.progressStyle) {\n            notification.progressStyle.segments = options.segments;\n            console.log('Progress segments updated (web implementation):', options);\n        }\n    }\n}\n//# sourceMappingURL=web.js.map"],"names":["registerPlugin","WebPlugin"],"mappings":"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"}