{"version":3,"file":"plugin.cjs.js","sources":["esm/index.js","esm/web.js"],"sourcesContent":["import { registerPlugin } from '@capacitor/core';\nconst ModernNotifications = registerPlugin('ModernNotifications', {\n    web: () => import('./web').then((m) => new m.ModernNotificationsWeb()),\n});\nexport * from './definitions';\nexport { ModernNotifications };\n//# sourceMappingURL=index.js.map","import { WebPlugin } from '@capacitor/core';\nexport class ModernNotificationsWeb extends WebPlugin {\n    constructor() {\n        super(...arguments);\n        this.notifications = [];\n        this.deliveredNotifications = [];\n        this.channels = [];\n        this.permission = 'prompt';\n    }\n    async requestPermissions() {\n        // Check if Notification API is supported\n        if (!('Notification' in window)) {\n            console.warn('This browser does not support desktop notifications');\n            this.permission = 'denied';\n            return { display: 'denied' };\n        }\n        // Request permission\n        const permission = await Notification.requestPermission();\n        this.permission = permission === 'granted' ? 'granted' : 'denied';\n        return { display: this.permission };\n    }\n    async checkPermissions() {\n        if (!('Notification' in window)) {\n            return { display: 'denied' };\n        }\n        this.permission = Notification.permission === 'granted' ? 'granted' :\n            Notification.permission === 'denied' ? 'denied' : 'prompt';\n        return { display: this.permission };\n    }\n    async schedule(options) {\n        var _a, _b;\n        const { notifications } = options;\n        if (this.permission !== 'granted') {\n            throw new Error('Permission not granted for notifications');\n        }\n        for (const notification of notifications) {\n            if ((_a = notification.schedule) === null || _a === void 0 ? void 0 : _a.at) {\n                // Schedule for specific time\n                const delay = notification.schedule.at.getTime() - Date.now();\n                if (delay > 0) {\n                    setTimeout(() => {\n                        this.showNotification(notification);\n                    }, delay);\n                }\n            }\n            else if ((_b = notification.schedule) === null || _b === void 0 ? void 0 : _b.after) {\n                // Schedule after delay\n                setTimeout(() => {\n                    this.showNotification(notification);\n                }, notification.schedule.after);\n            }\n            else {\n                // Show immediately\n                this.showNotification(notification);\n            }\n            this.notifications.push(notification);\n        }\n        return { notifications };\n    }\n    showNotification(notification) {\n        const options = {\n            body: notification.body,\n            icon: notification.largeIcon || notification.smallIcon,\n            badge: notification.badge,\n            tag: notification.id.toString(),\n            data: Object.assign(Object.assign({}, notification.extra), { id: notification.id, progressStyle: notification.progressStyle }),\n        };\n        const webNotification = new Notification(notification.title, options);\n        webNotification.onclick = () => {\n            this.notifyListeners('localNotificationReceived', {\n                notification,\n                actionId: 'tap',\n            });\n            webNotification.close();\n        };\n        // Move to delivered\n        this.deliveredNotifications.push(notification);\n        // Remove from pending\n        const index = this.notifications.findIndex(n => n.id === notification.id);\n        if (index > -1) {\n            this.notifications.splice(index, 1);\n        }\n    }\n    async getPending() {\n        return { notifications: this.notifications };\n    }\n    async getDelivered() {\n        return { notifications: this.deliveredNotifications };\n    }\n    async cancel(options) {\n        const idsToCancel = options.notifications.map(n => n.id);\n        this.notifications = this.notifications.filter(n => !idsToCancel.includes(n.id));\n    }\n    async cancelAll() {\n        this.notifications = [];\n    }\n    async removeDelivered(options) {\n        const idsToRemove = options.notifications.map(n => n.id);\n        this.deliveredNotifications = this.deliveredNotifications.filter(n => !idsToRemove.includes(n.id));\n    }\n    async removeAllDelivered() {\n        this.deliveredNotifications = [];\n    }\n    async createChannel(channel) {\n        // Web doesn't support channels, but we'll store for consistency\n        this.channels.push(channel);\n        console.log('Channel created (web implementation):', channel);\n    }\n    async deleteChannel(options) {\n        this.channels = this.channels.filter(c => c.id !== options.id);\n        console.log('Channel deleted (web implementation):', options.id);\n    }\n    async listChannels() {\n        return { channels: this.channels };\n    }\n    async updateProgress(options) {\n        // Find notification and update progress\n        const notification = this.deliveredNotifications.find(n => n.id === options.id);\n        if (notification && notification.progressStyle) {\n            notification.progressStyle.progress = options.progress;\n            if (options.progressStyle) {\n                notification.progressStyle = Object.assign(Object.assign({}, notification.progressStyle), options.progressStyle);\n            }\n            console.log('Progress updated (web implementation):', options);\n        }\n    }\n    async addProgressPoints(options) {\n        const notification = this.deliveredNotifications.find(n => n.id === options.id);\n        if (notification && notification.progressStyle) {\n            if (!notification.progressStyle.points) {\n                notification.progressStyle.points = [];\n            }\n            notification.progressStyle.points.push(...options.points);\n            console.log('Progress points added (web implementation):', options);\n        }\n    }\n    async updateProgressSegments(options) {\n        const notification = this.deliveredNotifications.find(n => n.id === options.id);\n        if (notification && notification.progressStyle) {\n            notification.progressStyle.segments = options.segments;\n            console.log('Progress segments updated (web implementation):', options);\n        }\n    }\n}\n//# sourceMappingURL=web.js.map"],"names":["registerPlugin","WebPlugin"],"mappings":"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"}